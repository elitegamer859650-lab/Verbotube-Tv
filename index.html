<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VerboTube TV Live</title>
    <style>
        body, html { margin: 0; padding: 0; background: #000; overflow: hidden; width: 100%; height: 100%; }
        .video-wrapper { position: relative; width: 100vw; height: 100vh; overflow: hidden; }
        #player { transform: scale(1.15); transform-origin: center; width: 100%; height: 100%; }
        
        /* ðŸŒ™ Left Side Logo Mask (Shan-e-Ramzan Video ke liye) */
        #left-mask { 
            position: absolute; top: 25px; left: 35px; 
            width: 210px; height: 115px; 
            background: #000; z-index: 200; 
            display: none; border-radius: 8px; 
        }

        .verbo-logo { 
            position: absolute; top: 40px; right: 50px; 
            z-index: 201; color: #ff0000; 
            font-family: 'Arial Black', sans-serif; font-size: 30px; 
            text-shadow: 3px 3px 6px #000;
        }
    </style>
</head>
<body>
    <div class="video-wrapper">
        <div id="player"></div>
        <div id="left-mask"></div> 
        <div class="verbo-logo">VerboTube <span style="color:white">LIVE</span></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyA8CjkoY0ygW4lhpTn_-BKOI9DjHqqFXBs",
            authDomain: "heroflix-d64ac.firebaseapp.com",
            databaseURL: "https://heroflix-d64ac-default-rtdb.firebaseio.com",
            projectId: "heroflix-d64ac",
            storageBucket: "heroflix-d64ac.firebasestorage.app",
            messagingSenderId: "451233952566",
            appId: "1:451233952566:web:1ecd9f7066d5e7cab77997"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database().ref("live_status");

        let player;
        const bumperID = 'rUcu5SL_I1k'; 

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%', width: '100%',
                videoId: '', 
                playerVars: { 'autoplay': 1, 'controls': 0, 'mute': 1, 'rel': 0 },
                events: { 'onReady': () => {
                    // Firebase listener: Jab bhi data badlega, video khud change hogi
                    db.on('value', (snapshot) => {
                        const data = snapshot.val();
                        if(data) switchContent(data);
                    });
                }}
            });
        }

        function switchContent(data) {
            if (data.type === "drama") {
                document.getElementById('left-mask').style.display = 'block';
                player.loadVideoById(bumperID);
                setTimeout(() => {
                    document.getElementById('left-mask').style.display = 'none';
                    player.loadVideoById(data.url);
                }, 27000);
            } else {
                player.loadVideoById(data.url);
            }
        }

        // Remote Interaction to unmute
        window.addEventListener('keydown', () => { player.unMute(); });
    </script>
</body>
</html>
